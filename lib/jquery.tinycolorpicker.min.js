/*! tinycolorpicker - v1.0.0 - 2019-16-04
 *
 * Copyright (c) 2019 Steve Ferrero <steve.ferrero@web-atrio.com>;
 * Licensed under the MIT license */

!function(o){"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof exports?module.exports=o(require("jquery")):o(jQuery)}(function(b){var v="tinycolorpicker",x={colors:["#ffffff","#A7194B","#FE2712","#FB9902","#FABC02","#FEFE33","#D0EA2B","#66B032","#0391CE","#0247FE","#3D01A5","#8601AF"],backgroundUrl:null};function n(e,o){this.options=b.extend({},x,o),this._defaults=x,this._name=v;var n,t,r,i=this,c=e.find(".track"),a=e.find(".color"),u=null,s=e.find(".colorInput"),d=e.find(".dropdown"),l=d.find("li").remove(),f=null,g=!1,h=!!document.createElement("canvas").getContext,p="ontouchstart"in document.documentElement;function m(o){if(g){var n=b(o.target).offset(),t=f.getImageData(o.pageX-n.left,o.pageY-n.top,1,1).data;i.setColor("rgb("+t[0]+","+t[1]+","+t[2]+")"),e.trigger("change",[i.colorHex,i.colorRGB])}}return this.colorHex="",this.colorRGB="",this.setColor=function(o){0<=o.indexOf("#")?(i.colorHex=o,i.colorRGB=i.hexToRgb(i.colorHex)):(i.colorRGB=o,i.colorHex=i.rgbToHex(i.colorRGB)),a.find(".colorInner").css("backgroundColor",i.colorHex),s.val(i.colorHex),s.trigger("change")},this.close=function(){g=!1,c.hide()},this.hexToRgb=function(o){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return"rgb("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+")"},this.rgbToHex=function(o){var n=o.match(/\d+/g);function t(o){var n=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");return isNaN(o)?"00":n[(o-o%16)/16]+n[o%16]}return"#"+t(n[0])+t(n[1])+t(n[2])},h?(u=b("<canvas></canvas>"),c.append(u),f=u[0].getContext("2d"),n=new Image,t=c.css("background-image").replace(/"/g,"").replace(/url\(|\)$/gi,""),n.crossOrigin="Anonymous",c.css("background-image","none"),b(n).load(function(){u.attr("width",this.width),u.attr("height",this.height),f.drawImage(n,0,0,this.width,this.height)}),n.src=i.options.backgroundUrl||t):b.each(i.options.colors,function(o,n){var t=l.clone();t.css("backgroundColor",n),t.attr("data-color",n),d.append(t)}),r=p?"touchstart":"mousedown",h?(a.bind(r,function(o){o.preventDefault(),o.stopPropagation(),c.toggle(),b(document).bind("mousedown.colorpicker",function(o){b(document).unbind(".colorpicker"),i.close()})}),p?(u.bind("touchstart",function(o){return g=!0,m(o.originalEvent.touches[0]),!1}),u.bind("touchmove",function(o){return m(o.originalEvent.touches[0]),!1}),u.bind("touchend",function(o){return i.close(),!1})):(u.mousedown(function(o){return g=!0,m(o),b(document).bind("mouseup.colorpicker",function(o){return b(document).unbind(".colorpicker"),i.close(),!1}),!1}),u.mousemove(m))):(a.bind("mousedown",function(o){o.preventDefault(),o.stopPropagation(),d.toggle()}),d.delegate("li","mousedown",function(o){o.preventDefault(),o.stopImmediatePropagation();var n=b(this).attr("data-color");i.setColor(n),d.hide()})),i}b.fn[v]=function(o){return this.each(function(){b.data(this,"plugin_"+v)||b.data(this,"plugin_"+v,new n(b(this),o))})}});
