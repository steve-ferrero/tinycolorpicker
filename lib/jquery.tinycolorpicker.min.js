/*! tinycolorpicker - v1.0.0 - 2019-16-04
 *
 * Copyright (c) 2019 Steve Ferrero <steve.ferrero@web-atrio.com>;
 * Licensed under the MIT license */

!function(o){"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof exports?module.exports=o(require("jquery")):o(jQuery)}(function(v){var b="tinycolorpicker",x={colors:["#ffffff","#A7194B","#FE2712","#FB9902","#FABC02","#FEFE33","#D0EA2B","#66B032","#0391CE","#0247FE","#3D01A5","#8601AF"],backgroundUrl:null,mousemove:!1};function e(t,o){this.options=v.extend({},x,o),this._defaults=x,this._name=b;var e,n,r,i=this,c=t.find(".track"),a=t.find(".color"),u=null,s=t.find(".colorInput"),d=t.find(".dropdown"),l=d.find("li").remove(),f=null,g=!1,h=!!document.createElement("canvas").getContext,p="ontouchstart"in document.documentElement;function m(o){if(g){var e=v(o.target).offset(),n=f.getImageData(o.pageX-e.left,o.pageY-e.top,1,1).data;i.setColor("rgb("+n[0]+","+n[1]+","+n[2]+")"),t.trigger("change",[i.colorHex,i.colorRGB])}}return this.colorHex="",this.colorRGB="",this.setColor=function(o){0<=o.indexOf("#")?(i.colorHex=o,i.colorRGB=i.hexToRgb(i.colorHex)):(i.colorRGB=o,i.colorHex=i.rgbToHex(i.colorRGB)),a.find(".colorInner").css("backgroundColor",i.colorHex),s.val(i.colorHex),s.trigger("change")},this.close=function(){g=!1,c.hide()},this.hexToRgb=function(o){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return"rgb("+parseInt(e[1],16)+","+parseInt(e[2],16)+","+parseInt(e[3],16)+")"},this.rgbToHex=function(o){var e=o.match(/\d+/g);function n(o){var e=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");return isNaN(o)?"00":e[(o-o%16)/16]+e[o%16]}return"#"+n(e[0])+n(e[1])+n(e[2])},h?(u=v("<canvas></canvas>"),c.append(u),f=u[0].getContext("2d"),e=new Image,n=c.css("background-image").replace(/"/g,"").replace(/url\(|\)$/gi,""),e.crossOrigin="Anonymous",c.css("background-image","none"),v(e).load(function(){u.attr("width",this.width),u.attr("height",this.height),f.drawImage(e,0,0,this.width,this.height)}),e.src=i.options.backgroundUrl||n):v.each(i.options.colors,function(o,e){var n=l.clone();n.css("backgroundColor",e),n.attr("data-color",e),d.append(n)}),r=p?"touchstart":"mousedown",h?(a.bind(r,function(o){o.preventDefault(),o.stopPropagation(),c.toggle(),v(document).bind("mousedown.colorpicker",function(o){v(document).unbind(".colorpicker"),i.close()})}),p?(u.bind("touchstart",function(o){return g=!0,m(o.originalEvent.touches[0]),!1}),u.bind("touchmove",function(o){return i.options.mousemove&&m(o.originalEvent.touches[0]),!1}),u.bind("touchend",function(o){return i.close(),!1})):(u.mousedown(function(o){return g=!0,m(o),v(document).bind("mouseup.colorpicker",function(o){return v(document).unbind(".colorpicker"),i.close(),!1}),!1}),i.options.mousemove&&u.mousemove(m))):(a.bind("mousedown",function(o){o.preventDefault(),o.stopPropagation(),d.toggle()}),d.delegate("li","mousedown",function(o){o.preventDefault(),o.stopImmediatePropagation();var e=v(this).attr("data-color");i.setColor(e),d.hide()})),i}v.fn[b]=function(o){return this.each(function(){v.data(this,"plugin_"+b)||v.data(this,"plugin_"+b,new e(v(this),o))})}});
