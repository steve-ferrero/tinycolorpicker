/*! tinycolorpicker - v1.0.0 - 2019-16-04
 *
 * Copyright (c) 2019 Steve Ferrero <steve.ferrero@web-atrio.com>;
 * Licensed under the MIT license */

!function(v,e){"use strict";var y={backgroundUrl:null};function t(n,e){this.options=function(){for(var e=1;e<arguments.length;e++)for(var o in arguments[e])arguments[e].hasOwnProperty(o)&&(arguments[0][o]=arguments[e][o]);return arguments[0]}({},y,e),this._defaults=y,this._name="tinycolorpicker";var o,t,r,c=this,u=n.querySelectorAll(".track")[0],l=n.querySelectorAll(".color")[0],i=n.querySelectorAll(".colorInner")[0],a=null,s=n.querySelectorAll(".colorInput")[0],d=null,h=!1,f=!!document.createElement("canvas").getContext,g="ontouchstart"in document.documentElement,m=document.createEvent("HTMLEvents");function p(e){if(h){var o=e.target.getBoundingClientRect(),t=d.getImageData(e.clientX-o.left,e.clientY-o.top,1,1).data;c.setColor("rgb("+t[0]+","+t[1]+","+t[2]+")"),n.dispatchEvent(m,[c.colorHex,c.colorRGB])}}return m.initEvent("change",!0,!0),this.colorHex="",this.colorRGB="",this.setColor=function(e){0<=e.indexOf("#")?(c.colorHex=e,c.colorRGB=c.hexToRgb(c.colorHex)):(c.colorRGB=e,c.colorHex=c.rgbToHex(c.colorRGB)),i.style.backgroundColor=c.colorHex,s.value=c.colorHex,s.dispatchEvent(new Event("change"))},this.close=function(){h=!1,u.style.display="none"},this.hexToRgb=function(e){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgb("+parseInt(o[1],16)+","+parseInt(o[2],16)+","+parseInt(o[3],16)+")"},this.rgbToHex=function(e){var o=e.match(/\d+/g);function t(e){var o=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");return isNaN(e)?"00":o[(e-e%16)/16]+o[e%16]}return"#"+t(o[0])+t(o[1])+t(o[2])},f&&(a=document.createElement("canvas"),u.appendChild(a),d=a.getContext("2d"),o=new Image,t=(u.currentStyle||v.getComputedStyle(u,!1)).backgroundImage.replace(/"/g,"").replace(/url\(|\)$/gi,""),o.crossOrigin="Anonymous",u.style.backgroundImage="none",o.onload=function(){a.width=this.width,a.height=this.height,d.drawImage(o,0,0,this.width,this.height)},o.src=c.options.backgroundUrl||t),r=g?"touchstart":"mousedown",f&&(l["on"+r]=function(e){e.preventDefault(),e.stopPropagation(),u.style.display="block",document.onmousedown=function(e){document.onmousedown=null,c.close()}},g?(a.ontouchstart=function(e){return h=!0,p(e.touches[0]),!1},a.ontouchmove=function(e){return p(e.touches[0]),!1},a.ontouchend=function(e){return c.close(),!1}):(a.onmousedown=function(e){e.preventDefault(),e.stopPropagation(),h=!0,p(e),document.onmouseup=function(e){return document.onmouseup=null,c.close(),!1}},a.onmousemove=p)),c}var o=function(e,o){return new t(e,o)};"function"==typeof define&&define.amd?define(function(){return o}):"object"==typeof module&&module.exports?module.exports=o:v.tinycolorpicker=o}(window);
